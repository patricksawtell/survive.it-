<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>TEst 29 region</title>
	<script type="text/javascript" src="d3/d3.min.js"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>
</head>
<body>
<script>

	var svg = d3.select("body")
		.append("svg")
		.attr("width", "80%")
		.attr("height", "80%")
		.style("border", "solid 5px black")
		.attr("viewBox", "-1946.9187411654511 -1066.9600480519075 436.297064352382 351.40925503670087");

	d3.csv("RegionsBC.csv", function (csv) {

		d3.json("bc_29.topo.json", function(map) {
			debugger
			var projection = d3.geo.mercator().scale(1000);
			var path = d3.geo.path().projection(projection);
			var featureCollection = topojson.feature(map, map.objects.collection);
			var neighbors = topojson.neighbors(map.objects.collection.geometries);
			var mapJ = svg.selectAll("path")
				.data(featureCollection.features)
				.enter()
				.append("path")
				.attr("d", path)
				.attr("id", function (item) {
					return item.properties.DR_NAME;
				})
				.style("fill", function (d) {
					//Get data value
					var value = d.properties.value;
					if (value) {
						//If value exists…
						return color(value);
					} else {
						//If value is undefined…
						return "#ccc";
					}
				});

		});
	});
</script>
</body>
</html>